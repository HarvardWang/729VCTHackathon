import requests
from bs4 import BeautifulSoup
import os

def makeFileName(url):
    path = url.replace('https://liquipedia.net/valorant/', '')
    filename = path.replace('/', '_')
    return f'{filename}.txt'

def name(url):
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')
    table = soup.find('table')
    player_names = []
    
    for row in table.find_all('tr')[1:]:
        cells = row.find_all(['th', 'td'])
        for cell in cells:

            if cell.find('a'):
                player_names.append(cell.text.strip())
                break
    

    player_names_string = ', '.join(name.strip() for name in player_names)
    player_names_string = player_names_string.replace('"', '').replace("'", "")

    return player_names_string

# Change this part for each link
url = 'https://liquipedia.net/valorant/VCL/2024/Japan/Split_2'
player_names_string = name(url)

if player_names_string:
    filename = makeFileName(url)
    filepath = os.path.join('.', filename)
    
    with open(filepath, 'w') as f:
        f.write(player_names_string)
